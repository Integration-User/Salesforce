<apex:page Controller="seismic.SeismicFolderPageController" action="{!Init}" showHeader="true" sidebar="false" >

<script type="text/javascript" src="{!URLFOR($Resource.jquery_3_6_1_min_js)}"></script>
<script type="text/javascript" src="{!URLFOR($Resource.jquery_base64_js)}"></script>
<script type="text/javascript" src="{!JSENCODE(CanvasSDKControllerUrlString)}"></script>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Seismic Folder Button</title>
    <style type="text/css">
        html, body, canvas-container { height: 100%; margin: 0; padding: 0; }
        body { background-color: white; font-size: 12px !important; line-height: 1.2 !important; }
        body #contentWrapper .bodyDiv .outerNoSidebar .noSidebarCell { padding: 0; }
        body #contentWrapper #bodyTable { padding: 0; }
        body #contentWrapper #bodyTable #seismicAppContainer { height: 800px !important; }
        body.sfdcBody { padding: 0 !important; }
        body.sfdcBody.apexPageInline { margin: 0; }

        nav.slds-breadcrumb-container {
            margin: 8px;
        }

        nav.slds-breadcrumb-container ol {
            list-style-type: none;
            align-items: center;
            background-color: #F9F9FB;
            padding: 10px;
        }

        nav.slds-breadcrumb-container li {
            display: inline;
            margin-left: 0px;
        }

        nav.slds-breadcrumb-container a {
            text-decoration: none;
            font-family: "Segoe UI", "Source Sans Pro", Arial, sans-serif;
            font-style: normal;
            font-weight: 400;
            font-size: 13px;
            line-height: 20px;
            color: #006DCC;
        }

        nav.slds-breadcrumb-container a:hover {
            text-decoration: underline;
        }

        .slds-breadcrumb__separator {
        margin: 0 5px;
        color: #0070d2;
        }
    </style>
</head>
<body>
   <apex:pageMessages id="messages" escape="false" rendered="{!HasInvalidSubscription}"/>
   
    <nav aria-label="Breadcrumb" class="slds-breadcrumb-container">
    <ol class="slds-breadcrumb slds-list_horizontal">
        <apex:repeat value="{!breadcrumbItems}" var="breadcrumb">
            <li class="slds-breadcrumb__item">
                <a href="{!breadcrumb.url}" class="slds-text-link">{!breadcrumb.label}</a>
                <apex:outputPanel rendered="{!NOT(breadcrumb == breadcrumbItems[breadcrumbItems.size-1])}">
                <span class="slds-breadcrumb__separator"> > </span>
                </apex:outputPanel>
            </li>
        </apex:repeat>
    </ol>
    </nav>
    <div class="canvas-container" style="border: 3px solid #f6f6f6; margin: 3px;">
    <apex:canvasApp applicationName="SeismicCanvasApp" namespacePrefix="seismic" developerName="SeismicCanvasApp" parameters="{!CanvasAppParamsString}" width="100%" scrolling="auto" rendered="{!IF(HasInvalidSubscription,false,true)}" onCanvasAppLoad="resize"/>
    </div>
    
	<script type="text/javascript">
		function handleOpenDetailRequest(mainPageData){
      var url = '{!JSENCODE(DetailPageUrl)}' + '#' + $.base64.encode(JSON.stringify(mainPageData));
      window.top.location.href = encodeURI(url);
    }
    
    Sfdc.canvas.controller.subscribe({name : 'showDetail', onData : function (e) {
      handleOpenDetailRequest(e.data);
    }});
    Sfdc.canvas.controller.subscribe({name : 'goBack', onData : function (e) {
      handleOpenDetailRequest(e.backUrl);
    }});
		
        function handleGoBackRequest(backUrl){
            window.top.location.href = encodeURI(backUrl);
        }

    function resize() {
        var body = document.body, html = document.documentElement;
        var containerHeight = Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight );
        Sfdc.canvas.controller.resize( {height : containerHeight+ "px"});
    } 
	</script>
</body>
</apex:page>