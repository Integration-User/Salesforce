{"dataSourceLinksInfo":{"enableAutomaticLinking":false,"excludeRelationships":[],"links":[]},"filters":[],"gridLayouts":[],"layouts":[],"steps":{"saql":{"broadcastFacet":true,"groups":["Month","StageName"],"numbers":["sum_Amount"],"query":"q = load \"pipeline_trending\";\nq = filter q by 'Stage.IsClosed' == \"false\";\nq = filter q by 'ForecastCategory' != \"Omitted\";\ntoday = filter q by 'IsLastUpdate' == \"1\";\ntoday = group today by 'StageName';\ntoday = foreach today generate 'StageName' as 'StageName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 0 as 'time_sort', \"Current\" as 'Month';\none = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"1 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"current month\"..]);\none = group one by 'StageName';\none = foreach one generate 'StageName' as 'StageName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 1 as 'time_sort', \"This Month\" as 'Month';\ntwo = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"2 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"1 month ago\"..]);\ntwo = group two by 'StageName';\ntwo = foreach two generate 'StageName' as 'StageName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 2 as 'time_sort', \"1 month ago\" as 'Month';\nthree = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"3 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"2 months ago\"..]);\nthree = group three by 'StageName';\nthree = foreach three generate 'StageName' as 'StageName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 3 as 'time_sort', \"2 months ago\" as 'Month';\nfour = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"4 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"3 months ago\"..]);\nfour = group four by 'StageName';\nfour = foreach four generate 'StageName' as 'StageName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 4 as 'time_sort', \"3 months ago\" as 'Month';\nfive = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"5 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"4 months ago\"..]);\nfive = group five by 'StageName';\nfive = foreach five generate 'StageName' as 'StageName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 5 as 'time_sort', \"4 months ago\" as 'Month';\nsix = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"6 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"5 month ago\"..]);\nsix = group six by 'StageName';\nsix = foreach six generate 'StageName' as 'StageName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 6 as 'time_sort', \"5 months ago\" as 'Month';\nseven = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"7 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"6 month ago\"..]);\nseven = group seven by 'StageName';\nseven = foreach seven generate 'StageName' as 'StageName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 7 as 'time_sort', \"6 months ago\" as 'Month';\nresult = union today, one, two, three, four, five, six, seven;\nresult = group result by ('Month', 'StageName');\nresult = foreach result generate 'StageName' as 'StageName', 'Month' as 'Month', sum('sum_Amount') as 'sum_Amount', first('stage_sort') as 'stage_sort', first('time_sort') as 'time_sort';\nresults = order result by ('time_sort' desc, 'stage_sort' asc);","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"none","strings":["Month","StageName"],"type":"saql","useGlobal":true}},"widgets":{"saql_table":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","interactions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"step":"saql","verticalPadding":8},"type":"table"}}}