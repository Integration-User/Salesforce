<!--
 - Created by zokito on 7/22/21.
 -->

<!-- Delete Subscribers -->
<template>
    <lightning-card title="Delete Subscribers" icon-name="standard:people">
        <lightning-spinner if:true={loading}></lightning-spinner>
        <template if:true={showInitialScreen}>
            <div class="slds-p-around_medium">
                <lightning-input type="file"
                                 label="Upload CSV file"
                                 multiple="false"
                                 accept=".csv"
                                 onchange={handleInputChange}></lightning-input>
            </div>
        </template>
        <template if:true={showConfirmTable}>
            <lightning-layout class="slds-m-left_medium slds-m-right_medium slds-border_bottom">
                <lightning-layout-item size="12">
                    <span class="slds-text-title_bold">Clicking Delete will delete the records from the system.<br/>Any eventual errors will be displayed on the next screen.</span>
                </lightning-layout-item>
            </lightning-layout>
            <div class="slds-p-around_medium">
                <lightning-datatable key-field="key"
                                     hide-checkbox-column
                                     column-widths-mode="auto"
                                     data={parsedRows}
                                     columns={columns}></lightning-datatable>
                <div class="slds-p-around_small slds-align_absolute-center">
                    <lightning-button variant="neutral"
                                      label="Cancel"
                                      title="Cancel" onclick={cancel}
                                      class="slds-m-left_x-small"></lightning-button>
                    <lightning-button variant="brand"
                                      label="Delete"
                                      title="Delete" onclick={deleteSubscribers}
                                      class="slds-m-left_x-small"></lightning-button>
                </div>
            </div>
        </template>
        <template if:true={showResultsTable}>
            <lightning-layout class="slds-m-left_medium slds-m-right_medium slds-border_bottom">
                <lightning-layout-item size="12">
                    <span class="slds-text-title_bold">Here are the results of the Subscriber delete action.</span>
                </lightning-layout-item>
            </lightning-layout>
            <div class="slds-p-around_medium">
                <lightning-datatable key-field="key"
                                     hide-checkbox-column
                                     column-widths-mode="auto"
                                     data={rows}
                                     columns={columns}></lightning-datatable>
                <div class="slds-p-around_small slds-align_absolute-center">
                    <lightning-button variant="neutral"
                                      label="Close"
                                      title="Close" onclick={cancel}
                                      class="slds-m-left_x-small"></lightning-button>
                </div>
            </div>
        </template>
        <template if:true={showInitialScreen}>
            <div class="slds-p-around_medium">
                <div class="slds-p-around_small slds-align_absolute-center">
                    <lightning-button variant="neutral"
                                      label="Cancel"
                                      title="Cancel" onclick={cancel}
                                      class="slds-m-left_x-small"></lightning-button>
                </div>
            </div>
        </template>
    </lightning-card>
</template>